import { DataSource } from 'typeorm';
import { config } from 'dotenv';
import * as path from 'path';
import * as fs from 'fs';
import * as bcrypt from 'bcrypt';
import { randomUUID } from 'crypto';

// Charger les variables d'environnement
const envFile = `.env.${process.env.NODE_ENV || 'development'}`;
const envPath = path.join(__dirname, '../../../', envFile);

if (fs.existsSync(envPath)) {
  config({ path: envPath });
}

const AppDataSource = new DataSource({
  type: 'postgres',
  host: process.env.DB_HOST || 'localhost',
  port: parseInt(process.env.DB_PORT || '5432'),
  username: process.env.DB_USERNAME || 'postgres',
  password: process.env.DB_PASSWORD || 'postgres',
  database: process.env.DB_DATABASE || 'hgpd_dev',
  synchronize: false,
  logging: false,
});

// Donn√©es de prestataires √† ajouter (80 total)
const PROVIDERS_DATA_ADDITIONAL = [
  // Lieux d'√©v√©nements (10)
  {
    firstName: 'Demba',
    lastName: 'Diallo',
    companyName: 'Centre Culturel Dakar Premium',
    activity: 'Salle de conf√©rence',
    phone: '+221771300001',
    email: 'demba.diallo@centreculturel.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Salle polyvalente avec audiovisuel',
    categoryId: 190,
  },
  {
    firstName: 'Aya',
    lastName: 'Ba',
    companyName: 'Villa Royale Luxury',
    activity: 'Location de villa haut standing',
    phone: '+221771300002',
    email: 'aya.ba@villaroyale.sn',
    department: 'Thi√®s',
    commune: 'Mbour',
    shortDescription: 'Villa moderne avec piscine et jardin',
    categoryId: 190,
  },
  {
    firstName: 'Sidi',
    lastName: 'Gueye',
    companyName: 'Auberge Oc√©an Bleu',
    activity: 'Auberge',
    phone: '+221771300003',
    email: 'sidi.gueye@auberge.sn',
    department: 'Saint-Louis',
    commune: 'Saint-Louis',
    shortDescription: 'Auberge de charme avec vue fleuve',
    categoryId: 190,
  },
  {
    firstName: 'Ndeye',
    lastName: 'Sow',
    companyName: 'Plage Loisirs Event',
    activity: 'Espace plage',
    phone: '+221771300004',
    email: 'ndeye.sow@plageevent.sn',
    department: 'Kaolack',
    commune: 'Kaolack',
    shortDescription: 'Espace plage privatisable',
    categoryId: 190,
  },
  {
    firstName: 'Lamine',
    lastName: 'Sall',
    companyName: 'Golf Resort Senegal',
    activity: 'Resort √©v√©nementiel',
    phone: '+221771300005',
    email: 'lamine.sall@golfresort.sn',
    department: 'Thi√®s',
    commune: 'Saly',
    shortDescription: 'Resort avec terrain de golf',
    categoryId: 190,
  },
  {
    firstName: 'A√Øssatou',
    lastName: 'Faye',
    companyName: 'Boutique H√¥tel Prestige',
    activity: 'H√¥tel boutique',
    phone: '+221771300006',
    email: 'aissatou.faye@boutique.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Petit h√¥tel de charme 4 √©toiles',
    categoryId: 190,
  },
  {
    firstName: 'Cheikh',
    lastName: 'Ndiaye',
    companyName: 'Palais du Roi √âv√©nements',
    activity: 'Grand palais',
    phone: '+221771300007',
    email: 'cheikh.ndiaye@palais.sn',
    department: 'Dakar',
    commune: 'Gu√©diawaye',
    shortDescription: 'Grand palais pouvant accueillir 1000 personnes',
    categoryId: 190,
  },
  {
    firstName: 'Fatou',
    lastName: 'Sarr',
    companyName: 'Riad Maroc Sens',
    activity: 'Riad traditionnel',
    phone: '+221771300008',
    email: 'fatou.sarr@riad.sn',
    department: 'Dakar',
    commune: 'M√©dina',
    shortDescription: 'Riad traditionnel avec patio central',
    categoryId: 190,
  },
  {
    firstName: 'Mamadou',
    lastName: 'Diop',
    companyName: 'Bistro Belle Vue',
    activity: 'Restaurant boutique',
    phone: '+221771300009',
    email: 'mamadou.diop@bistro.sn',
    department: 'Thi√®s',
    commune: 'Mbour',
    shortDescription: 'Petit restaurant avec vue panoramique',
    categoryId: 190,
  },
  {
    firstName: 'Safiatou',
    lastName: 'Gueye',
    companyName: 'Beach Club Paradise',
    activity: 'Beach club',
    phone: '+221771300010',
    email: 'safiatou.gueye@beach.sn',
    department: 'Kaolack',
    commune: 'Kaolack',
    shortDescription: 'Beach club avec cabanas',
    categoryId: 190,
  },

  // Mat√©riel (10)
  {
    firstName: 'Ousmane',
    lastName: 'Sow',
    companyName: '√âclairage LED Pro',
    activity: '√âclairage √©v√©nementiel',
    phone: '+221771300011',
    email: 'ousmane.sow@eclairage.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: '√âclairage LED haute puissance',
    categoryId: 191,
  },
  {
    firstName: 'Mariama',
    lastName: 'Ba',
    companyName: 'Studio Photo Pro',
    activity: 'Photographe professionnel',
    phone: '+221771300012',
    email: 'mariama.ba@studiopl.sn',
    department: 'Dakar',
    commune: 'Plateau',
    shortDescription: 'Studio photos avec √©quipement haut de gamme',
    categoryId: 191,
  },
  {
    firstName: 'Ibrahima',
    lastName: 'Gueye',
    companyName: 'Video Production House',
    activity: 'Production vid√©o',
    phone: '+221771300013',
    email: 'ibrahima.gueye@videopro.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Production vid√©o 4K et drone',
    categoryId: 191,
  },
  {
    firstName: 'Halimatou',
    lastName: 'Diop',
    companyName: 'Location Chaises Premium',
    activity: 'Location de mobilier',
    phone: '+221771300014',
    email: 'halimatou.diop@chairs.sn',
    department: 'Thi√®s',
    commune: 'Mbour',
    shortDescription: 'Chaises Chiavari, tables d√©cor√©es',
    categoryId: 191,
  },
  {
    firstName: 'Pape',
    lastName: 'Sarr',
    companyName: 'Tonnelles Events',
    activity: 'Location de tonnelles',
    phone: '+221771300015',
    email: 'pape.sarr@tonnelles.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Tonnelles et b√¢ches de qualit√©',
    categoryId: 191,
  },
  {
    firstName: 'Ndeye',
    lastName: 'Ndiaye',
    companyName: 'Studio Son Professionnel',
    activity: 'Sonorisation',
    phone: '+221771300016',
    email: 'ndeye.ndiaye@studio.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Syst√®me de son complet avec DJ booth',
    categoryId: 191,
  },
  {
    firstName: 'Modou',
    lastName: 'Ba',
    companyName: 'Drones et A√©riens',
    activity: 'Prise de vue par drone',
    phone: '+221771300017',
    email: 'modou.ba@drones.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Drone 4K et photographies a√©riennes',
    categoryId: 191,
  },
  {
    firstName: 'Aissatou',
    lastName: 'Sall',
    companyName: 'Montage Expo Events',
    activity: 'Montage sc√©nographie',
    phone: '+221771300018',
    email: 'aissatou.sall@montage.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: "Montage et d√©montage d'√©v√©nements",
    categoryId: 191,
  },
  {
    firstName: 'Yacine',
    lastName: 'Gueye',
    companyName: 'G√©n√©rateurs Premium',
    activity: 'Location groupes √©lectrog√®nes',
    phone: '+221771300019',
    email: 'yacine.gueye@generateurs.sn',
    department: 'Thi√®s',
    commune: 'Mbour',
    shortDescription: 'G√©n√©rateurs silencieux pour √©v√©nements',
    categoryId: 191,
  },
  {
    firstName: 'Fatima',
    lastName: 'Diallo',
    companyName: '√âcrans G√©ants Video',
    activity: 'Location √©crans LED',
    phone: '+221771300020',
    email: 'fatima.diallo@ecrans.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: '√âcrans LED g√©ants pour √©v√©nements',
    categoryId: 191,
  },

  // Traiteur (12)
  {
    firstName: 'Khadim',
    lastName: 'Ba',
    companyName: 'Cuisine Yor Traditionnel',
    activity: 'Traiteur cuisine s√©n√©galaise',
    phone: '+221771300021',
    email: 'khadim.ba@cuisineyor.sn',
    department: 'Kaolack',
    commune: 'Kaolack',
    shortDescription: 'Sp√©cialiste thi√©boudienne et riz gras',
    categoryId: 192,
  },
  {
    firstName: 'Coumba',
    lastName: 'Sow',
    companyName: 'Sp√©cial Maf√© & Cie',
    activity: 'Maf√© et plats traditionnels',
    phone: '+221771300022',
    email: 'coumba.sow@mafe.sn',
    department: 'Kaolack',
    commune: 'Kaolack',
    shortDescription: 'Maf√©, yassa, domoda authentiques',
    categoryId: 192,
  },
  {
    firstName: 'A√Øda',
    lastName: 'Gueye',
    companyName: 'La Cuisine Italienne Raffin√©e',
    activity: 'Cuisine italienne',
    phone: '+221771300023',
    email: 'aida.gueye@italian.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'P√¢tes fra√Æches et pizzas tradition',
    categoryId: 192,
  },
  {
    firstName: 'Samba',
    lastName: 'Ndiaye',
    companyName: 'Gourmet Asiatique Prestige',
    activity: 'Cuisine asiatique',
    phone: '+221771300024',
    email: 'samba.ndiaye@asiatique.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Cuisine tha√Ø, chinoise et vietnamienne',
    categoryId: 192,
  },
  {
    firstName: 'Awa',
    lastName: 'Diop',
    companyName: 'P√¢tisserie Gourmande',
    activity: 'P√¢tisserie fine',
    phone: '+221771300025',
    email: 'awa.diop@patisserie.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'G√¢teaux personnalis√©s et pi√®ces mont√©es',
    categoryId: 192,
  },
  {
    firstName: 'Thierno',
    lastName: 'Ba',
    companyName: 'Cocktail Bar Premium',
    activity: 'Ap√©ro et cocktails',
    phone: '+221771300026',
    email: 'thierno.ba@cocktail.sn',
    department: 'Dakar',
    commune: 'Plateau',
    shortDescription: 'Bar √† cocktails avec barman professionnel',
    categoryId: 192,
  },
  {
    firstName: 'Miriam',
    lastName: 'Sarr',
    companyName: 'Catering Prestige Plus',
    activity: 'Catering complet',
    phone: '+221771300027',
    email: 'miriam.sarr@catering.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Service complet avec serveurs et cuisinier',
    categoryId: 192,
  },
  {
    firstName: 'Mactar',
    lastName: 'Gueye',
    companyName: 'BBQ Fest Senegal',
    activity: 'Barbecue et grillades',
    phone: '+221771300028',
    email: 'mactar.gueye@bbq.sn',
    department: 'Thi√®s',
    commune: 'Mbour',
    shortDescription: 'Grillades et barbecue tradition',
    categoryId: 192,
  },
  {
    firstName: 'A√Øssatou',
    lastName: 'Ba',
    companyName: 'Pizza Mobile Delux',
    activity: 'Pizzeria mobile',
    phone: '+221771300029',
    email: 'aissatou.ba@pizzamobile.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Four √† pizza mobile avec pizzaiolo',
    categoryId: 192,
  },
  {
    firstName: 'Oumy',
    lastName: 'Diallo',
    companyName: 'Cr√™perie Gourmande Bretonne',
    activity: 'Cr√™pes et galettes',
    phone: '+221771300030',
    email: 'oumy.diallo@creperie.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Cr√™pes bretonnes authentiques',
    categoryId: 192,
  },
  {
    firstName: 'Malick',
    lastName: 'Ndiaye',
    companyName: 'Jus Fruits Frais Artisanal',
    activity: 'Jus et boissons frais',
    phone: '+221771300031',
    email: 'malick.ndiaye@jus.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Jus frais press√©s et smoothies',
    categoryId: 192,
  },
  {
    firstName: 'Nd√®ye',
    lastName: 'Faye',
    companyName: 'C√¥t√© Chaud Food Truck',
    activity: 'Food truck',
    phone: '+221771300032',
    email: 'ndeye.faye@foodtruck.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Food truck avec cuisine vari√©e',
    categoryId: 192,
  },

  // D√©coration (10)
  {
    firstName: 'Aminata',
    lastName: 'Gueye',
    companyName: 'Fleurs Exotiques Prestige',
    activity: 'Arrangements floraux',
    phone: '+221771300033',
    email: 'aminata.gueye@fleurs.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Arrangements floraux haut de gamme',
    categoryId: 193,
  },
  {
    firstName: 'Oumou',
    lastName: 'Ba',
    companyName: 'Design Salle √âv√©nement',
    activity: 'Design int√©rieur √©v√©nementiel',
    phone: '+221771300034',
    email: 'oumou.ba@designsalle.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Conception et d√©coration de salle',
    categoryId: 193,
  },
  {
    firstName: 'Halimatou',
    lastName: 'Ba',
    companyName: 'Ballons et D√©corations',
    activity: 'Ballons et guirlandes',
    phone: '+221771300035',
    email: 'halimatou.ba@ballons.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Sculptures ballons et arches',
    categoryId: 193,
  },
  {
    firstName: 'Khadi',
    lastName: 'Diallo',
    companyName: 'Nappes et Linges Premium',
    activity: 'Location de linges',
    phone: '+221771300036',
    email: 'khadi.diallo@linges.sn',
    department: 'Thi√®s',
    commune: 'Mbour',
    shortDescription: 'Nappes, chemins, serviettes luxe',
    categoryId: 193,
  },
  {
    firstName: 'Mariam',
    lastName: 'Gueye',
    companyName: 'Bougies D√©coratives Luxe',
    activity: 'Bougies et luminaires',
    phone: '+221771300037',
    email: 'mariam.gueye@bougies.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Bougies odorantes et chandeliers',
    categoryId: 193,
  },
  {
    firstName: 'Sidy',
    lastName: 'Ba',
    companyName: 'M√©tallurgie D√©cor Art',
    activity: 'D√©cor m√©tallique et arches',
    phone: '+221771300038',
    email: 'sidy.ba@metalarts.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Arches en m√©tal et structures d√©cor',
    categoryId: 193,
  },
  {
    firstName: 'Fatoumata',
    lastName: 'Sarr',
    companyName: 'Chaise Chiavari Prestige',
    activity: 'Location chaises d√©cor√©es',
    phone: '+221771300039',
    email: 'fatoumata.sarr@chiavari.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Chaises Chiavari dor√©es et argent√©es',
    categoryId: 193,
  },
  {
    firstName: 'Ndiaye',
    lastName: 'Sow',
    companyName: 'Photobooth Cr√©atif',
    activity: 'Photobooth avec accessoires',
    phone: '+221771300040',
    email: 'ndiaye.sow@photobooth.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Photobooth avec effets et personnalisation',
    categoryId: 193,
  },
  {
    firstName: 'Coumba',
    lastName: 'Ndiaye',
    companyName: 'Miroirs et Panneaux D√©co',
    activity: 'D√©coration murale',
    phone: '+221771300041',
    email: 'coumba.ndiaye@miroirs.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Miroirs dor√©s et panneaux personnalis√©s',
    categoryId: 193,
  },
  {
    firstName: 'Yacine',
    lastName: 'Diallo',
    companyName: 'Location Tables D√©cor√©es',
    activity: 'Tables cocktail et hautes',
    phone: '+221771300042',
    email: 'yacine.diallo@tables.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Tables d√©cor√©es avec housses luxe',
    categoryId: 193,
  },

  // Transports (10)
  {
    firstName: 'Mamadou',
    lastName: 'Sarr',
    companyName: 'Uber Prestige Dakar',
    activity: 'VTC service premium',
    phone: '+221771300043',
    email: 'mamadou.sarr@uberprestige.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Service VTC voiture premium',
    categoryId: 194,
  },
  {
    firstName: 'Fallou',
    lastName: 'Ba',
    companyName: 'Limousine Prestige Events',
    activity: 'Limousine service',
    phone: '+221771300044',
    email: 'fallou.ba@limousine.sn',
    department: 'Dakar',
    commune: 'Plateau',
    shortDescription: 'Service limousine noir avec chauffeur',
    categoryId: 194,
  },
  {
    firstName: 'Abdoulaye',
    lastName: 'Gueye',
    companyName: 'Mercedes Classe S Prestige',
    activity: 'Location voiture prestige',
    phone: '+221771300045',
    email: 'abdoulaye.gueye@mercedes.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Mercedes de luxe avec chauffeur',
    categoryId: 194,
  },
  {
    firstName: 'A√Øssatou',
    lastName: 'Diallo',
    companyName: 'Bus Climatis√© Confort',
    activity: 'Location bus climatis√©',
    phone: '+221771300046',
    email: 'aissatou.diallo@busconfort.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Bus climatis√© 50 places avec chauffeur',
    categoryId: 194,
  },
  {
    firstName: 'Maram',
    lastName: 'Ndiaye',
    companyName: 'Minibus 14 Places',
    activity: 'Location minibus',
    phone: '+221771300047',
    email: 'maram.ndiaye@minibus.sn',
    department: 'Thi√®s',
    commune: 'Mbour',
    shortDescription: 'Minibus climatis√© 14 places',
    categoryId: 194,
  },
  {
    firstName: 'Mamadou',
    lastName: 'Sall',
    companyName: 'Chauffeurs Priv√©s Elite',
    activity: 'Service chauffeur priv√©',
    phone: '+221771300048',
    email: 'mamadou.sall@chauffeurs.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Chauffeurs anglicistes exp√©riment√©s',
    categoryId: 194,
  },
  {
    firstName: 'Ndeye',
    lastName: 'Sarr',
    companyName: 'Vespa Prestige Tours',
    activity: 'Location de scooters',
    phone: '+221771300049',
    email: 'ndeye.sarr@vespa.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Vespa et scooters pour tours',
    categoryId: 194,
  },
  {
    firstName: 'Ousmane',
    lastName: 'Diallo',
    companyName: 'Bicyclette Event Tours',
    activity: 'Location de v√©los',
    phone: '+221771300050',
    email: 'ousmane.diallo@velos.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'V√©los d√©cor√©s pour √©v√©nement',
    categoryId: 194,
  },
  {
    firstName: 'Safiatou',
    lastName: 'Ba',
    companyName: 'Taxi Blanc Service',
    activity: 'Service taxi collectif',
    phone: '+221771300051',
    email: 'safiatou.ba@taxiblanc.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Taxis blancs pour transferts',
    categoryId: 194,
  },
  {
    firstName: 'Babacar',
    lastName: 'Gueye',
    companyName: 'Bateau Priv√© Event Cruise',
    activity: 'Location bateau priv√©',
    phone: '+221771300052',
    email: 'babacar.gueye@bateau.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Bateau priv√© pour croisi√®re √©v√©nement',
    categoryId: 194,
  },

  // Personnels (8)
  {
    firstName: 'Saliu',
    lastName: 'Diallo',
    companyName: 'Serveurs Event Premium',
    activity: 'Service serveurs',
    phone: '+221771300053',
    email: 'saliu.diallo@serveurs.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: '√âquipe serveurs form√©s et courtois',
    categoryId: 195,
  },
  {
    firstName: 'Oupa',
    lastName: 'Ba',
    companyName: 'Chef P√¢tissier Priv√©',
    activity: 'P√¢tissier professionnel',
    phone: '+221771300054',
    email: 'oupa.ba@patissier.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Chef p√¢tissier sp√©cialis√© mariage',
    categoryId: 195,
  },
  {
    firstName: 'Amadou',
    lastName: 'Gueye',
    companyName: 'Sommelier Conseil √âv√©nement',
    activity: 'Sommelier consultant',
    phone: '+221771300055',
    email: 'amadou.gueye@sommelier.sn',
    department: 'Dakar',
    commune: 'Plateau',
    shortDescription: 'Sommelier pour s√©lection vins',
    categoryId: 195,
  },
  {
    firstName: 'Fatimata',
    lastName: 'Sarr',
    companyName: 'Assistant Organisatrice',
    activity: 'Assistante organisatrice',
    phone: '+221771300056',
    email: 'fatimata.sarr@assistant.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Assistante jour J pour coordination',
    categoryId: 195,
  },
  {
    firstName: 'Youssouf',
    lastName: 'Ndiaye',
    companyName: 'Chef Cuisinier Moderne',
    activity: 'Chef cuisinier',
    phone: '+221771300057',
    email: 'youssouf.ndiaye@chef.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Chef sp√©cialis√© cuisine moderne',
    categoryId: 195,
  },
  {
    firstName: 'Mir√®le',
    lastName: 'Diallo',
    companyName: 'Ma√Ætre de C√©r√©monie Pro',
    activity: 'Ma√Ætre de c√©r√©monie',
    phone: '+221771300058',
    email: 'mirele.diallo@mc.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: "MC exp√©riment√© tous types d'√©v√©nements",
    categoryId: 195,
  },
  {
    firstName: 'Amandine',
    lastName: 'Ba',
    companyName: 'Staff √âv√©nement Complet',
    activity: 'Staff √©v√©nement',
    phone: '+221771300059',
    email: 'amandine.ba@staff.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: '√âquipe compl√®te pour √©v√©nement',
    categoryId: 195,
  },
  {
    firstName: 'Lambert',
    lastName: 'Gueye',
    companyName: 'Barista Caf√© Events',
    activity: 'Barista professionnel',
    phone: '+221771300060',
    email: 'lambert.gueye@barista.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Barista pour station caf√© √©v√©nement',
    categoryId: 195,
  },

  // Pour Elle (8)
  {
    firstName: 'Mariam',
    lastName: 'Diallo',
    companyName: 'Salon Beaut√© Compl√®te',
    activity: 'Salon de beaut√©',
    phone: '+221771300061',
    email: 'mariam.diallo@salon.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Coiffure, maquillage, spa complet',
    categoryId: 196,
  },
  {
    firstName: 'Hawa',
    lastName: 'Gueye',
    companyName: 'Couturi√®re de Renom',
    activity: 'Couturi√®re',
    phone: '+221771300062',
    email: 'hawa.gueye@couture.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Couturi√®re sp√©cialis√©e mari√©es',
    categoryId: 196,
  },
  {
    firstName: 'A√Øssatou',
    lastName: 'Sow',
    companyName: 'Visagiste Maquillage Bridal',
    activity: 'Maquilleur professionnel',
    phone: '+221771300063',
    email: 'aissatou.sow@visagiste.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Maquillage sp√©cialis√© mari√©e',
    categoryId: 196,
  },
  {
    firstName: 'Aminata',
    lastName: 'Ndiaye',
    companyName: 'Coiffure Tresses & Chignon',
    activity: 'Coiffeuse sp√©cialis√©e',
    phone: '+221771300064',
    email: 'aminata.ndiaye@coiffure.sn',
    department: 'Dakar',
    commune: 'M√©dina',
    shortDescription: 'Tresses, chignons et coiffures',
    categoryId: 196,
  },
  {
    firstName: 'Assiba',
    lastName: 'Ba',
    companyName: 'Mode Designer Africain',
    activity: 'Couturi√®re designer',
    phone: '+221771300065',
    email: 'assiba.ba@designer.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Designer mode africaine moderne',
    categoryId: 196,
  },
  {
    firstName: 'Ndeye',
    lastName: 'Gueye',
    companyName: 'Accessoires Mode Prestige',
    activity: 'Accessoires de mode',
    phone: '+221771300066',
    email: 'ndeye.gueye@accessoires.sn',
    department: 'Dakar',
    commune: 'Plateau',
    shortDescription: 'Bijoux et accessoires haut de gamme',
    categoryId: 196,
  },
  {
    firstName: 'Khady',
    lastName: 'Diallo',
    companyName: 'Spa Mobile Wellness',
    activity: 'Services spa mobile',
    phone: '+221771300067',
    email: 'khady.diallo@spa.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Spa mobile pour bien-√™tre',
    categoryId: 196,
  },
  {
    firstName: 'Fatoumata',
    lastName: 'Sall',
    companyName: 'Boutique Chaussures Luxe',
    activity: 'Chaussures de designer',
    phone: '+221771300068',
    email: 'fatoumata.sall@chaussures.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Chaussures de luxe et talons',
    categoryId: 196,
  },

  // Animation (12)
  {
    firstName: 'Seydou',
    lastName: 'Sow',
    companyName: 'Orchestre Jazz Dakar',
    activity: 'Groupe jazz',
    phone: '+221771300069',
    email: 'seydou.sow@jazz.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Groupe jazz professionnel',
    categoryId: 197,
  },
  {
    firstName: 'A√Øda',
    lastName: 'Ba',
    companyName: 'Ballets Africains Prestige',
    activity: 'Danseurs professionnels',
    phone: '+221771300070',
    email: 'aida.ba@ballets.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Groupe danseurs danses africaines',
    categoryId: 197,
  },
  {
    firstName: 'Pape',
    lastName: 'Diallo',
    companyName: 'DJ Resident Remixeur',
    activity: 'DJ remixeur',
    phone: '+221771300071',
    email: 'pape.diallo@djresidence.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'DJ remixeur et producteur',
    categoryId: 197,
  },
  {
    firstName: 'Oumou',
    lastName: 'Gueye',
    companyName: 'Chanteuse Vari√©t√© Prestige',
    activity: 'Chanteuse',
    phone: '+221771300072',
    email: 'oumou.gueye@chanteuse.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Chanteuse vari√©t√© fran√ßaise et mbalax',
    categoryId: 197,
  },
  {
    firstName: 'Moussa',
    lastName: 'Sarr',
    companyName: 'Groupe Mbalax Sensation',
    activity: 'Groupe mbalax',
    phone: '+221771300073',
    email: 'moussa.sarr@mbalax.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Groupe mbalax traditionnel',
    categoryId: 197,
  },
  {
    firstName: 'Amandine',
    lastName: 'Ndiaye',
    companyName: 'Animations Jeux Enfants',
    activity: 'Animatrice jeux enfants',
    phone: '+221771300074',
    email: 'amandine.ndiaye@jeux.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Animations et jeux pour enfants',
    categoryId: 197,
  },
  {
    firstName: 'Cheikh',
    lastName: 'Ba',
    companyName: 'Magicien Illusionniste Pro',
    activity: 'Magicien illusionniste',
    phone: '+221771300075',
    email: 'cheikh.ba@magicien.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Magicien illusionniste pour √©v√©nements',
    categoryId: 197,
  },
  {
    firstName: 'Mari√®me',
    lastName: 'Diallo',
    companyName: 'Danseurs Salon Prestige',
    activity: 'Danseurs de salon',
    phone: '+221771300076',
    email: 'marieme.diallo@salonp.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Danseurs de salon professionnel',
    categoryId: 197,
  },
  {
    firstName: 'Youssouf',
    lastName: 'Gueye',
    companyName: 'Groupe Guitaristes Classiques',
    activity: 'Groupe guitare classique',
    phone: '+221771300077',
    email: 'youssouf.gueye@guitare.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Guitares classiques pour c√©r√©monie',
    categoryId: 197,
  },
  {
    firstName: 'Talla',
    lastName: 'Ndiaye',
    companyName: 'Ventriloque & Marionnettes',
    activity: 'Ventriloque',
    phone: '+221771300078',
    email: 'talla.ndiaye@ventriloque.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Spectacles ventriloque enfants',
    categoryId: 197,
  },
  {
    firstName: 'Malick',
    lastName: 'Sall',
    companyName: 'Acrobates & √âquilibristes',
    activity: 'Acrobate',
    phone: '+221771300079',
    email: 'malick.sall@acrobate.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Spectacles acrobatiques',
    categoryId: 197,
  },
  {
    firstName: 'Nd√®ye',
    lastName: 'Sarr',
    companyName: 'Clown √âv√©nement Dr√¥le',
    activity: 'Clown professionnel',
    phone: '+221771300080',
    email: 'ndeye.sarr@clown.sn',
    department: 'Dakar',
    commune: 'Dakar',
    shortDescription: 'Clown pour animation enfants',
    categoryId: 197,
  },
];

async function main() {
  try {
    await AppDataSource.initialize();
    console.log('‚úÖ Connexion √† la base de donn√©es √©tablie');

    // √âtape 1: Cr√©er les 80 prestataires suppl√©mentaires
    console.log('\nüìã Ajout de 80 prestataires suppl√©mentaires...');

    let createdCount = 0;
    const now = new Date();

    for (const providerData of PROVIDERS_DATA_ADDITIONAL) {
      const { categoryId, ...providerFields } = providerData;

      // Hasher le mot de passe
      const hashedPassword = await bcrypt.hash('Provider@123', 10);
      const providerId = randomUUID();

      // Ins√©rer le prestataire via requ√™te SQL
      await AppDataSource.query(
        `INSERT INTO providers (
          id, first_name, last_name, company_name, activity, 
          department, commune, phone, email,
          password, identity_doc_type, identity_doc_number,
          email_verified_at, phone_verified_at, is_active,
          show_phone_number, created_at, updated_at
        ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18)`,
        [
          providerId,
          providerFields.firstName,
          providerFields.lastName,
          providerFields.companyName,
          providerFields.activity,
          providerFields.department,
          providerFields.commune,
          providerFields.phone,
          providerFields.email,
          hashedPassword,
          'passport',
          `SN${Math.random().toString(36).substring(2, 11)}`,
          now,
          now,
          true,
          false,
          now,
          now,
        ],
      );

      // Ajouter la cat√©gorie du prestataire
      await AppDataSource.query(
        `INSERT INTO provider_categories (
          provider_id, category_id, sub_category_id, created_at
        ) VALUES ($1, $2, $3, $4)`,
        [providerId, categoryId, null, now],
      );

      createdCount++;
      if (createdCount % 10 === 0) {
        console.log(`  ‚úì ${createdCount}/80 prestataires cr√©√©s...`);
      }
    }

    console.log(
      `\n‚úÖ ${createdCount} prestataires suppl√©mentaires cr√©√©s avec succ√®s`,
    );

    // √âtape 2: V√©rification
    console.log('\nüìã V√©rification des donn√©es...');
    const providersCount = await AppDataSource.query(
      'SELECT COUNT(*) FROM providers',
    );
    const categoriesStats = await AppDataSource.query(
      `SELECT 
        c.id, 
        c.name, 
        COUNT(pc.provider_id) as provider_count
      FROM categories c
      LEFT JOIN provider_categories pc ON c.id = pc.category_id
      WHERE c.id BETWEEN 161 AND 168
      GROUP BY c.id, c.name
      ORDER BY c.id`,
    );

    console.log(`\n  ‚úì Total prestataires: ${providersCount[0].count}`);
    console.log('\n  Distribution par cat√©gorie:');
    for (const stat of categoriesStats) {
      console.log(`    - ${stat.name}: ${stat.provider_count} prestataires`);
    }

    console.log('\nüéâ Ajout des 80 prestataires termin√© avec succ√®s!');
  } catch (error) {
    console.error('‚ùå Erreur:', error);
    process.exit(1);
  } finally {
    await AppDataSource.destroy();
  }
}

main();
